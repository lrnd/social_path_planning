#!/usr/bin/env python

from __future__ import absolute_import, division, print_function
import argparse
import json
from lstm_motion_model import models
import os.path


def main():
    # Parse command line arguments
    parser = argparse.ArgumentParser()
    parser.add_argument('model_type',
                        help='The type of model to generate config for: '
                        + ', '.join(models.get_model_dict().keys()),
                        type=str)
    parser.add_argument('-o', '--output', help='Filename to save config to')
    args = parser.parse_args()

    if args.output is None:
        args.output = args.model_type

    # Add json extension if absent
    root, ext = os.path.splitext(args.output)
    if ext != '.json':
        args.output += '.json'

    config = {}
    config['model_type'] = args.model_type
    config['model_args'] = models.lookup(args.model_type).default_config()

    with open(args.output, 'w') as f:
        json.dump(config, f, indent=4, sort_keys=True)
    print('Config written to {}'.format(args.output))


if __name__ == '__main__':
    main()
